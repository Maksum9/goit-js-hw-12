{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\nconst fetchUsersBtn = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst textInput = document.querySelector('.text-input');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet currentPage = 1;\nlet searchTerm = '';\nconst perPage = 40;\n\nconst modal = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst loader = document.querySelector('.loader');\nloader.style.display = 'none';\n\nfetchUsersBtn.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  searchTerm = textInput.value;\n  gallery.innerHTML = '';\n  currentPage = 1;\n  loadMoreBtn.style.display = 'none';\n\n  const searchParams = new URLSearchParams({\n    key: '41525979-544d9b4f8d317eee068e80d65',\n    q: searchTerm,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true\n  });\n  \n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?${searchParams}&page=${currentPage}&per_page=${perPage}`);\n    loader.style.display = 'none';\n\n    if (response.status !== 200) {\n      throw new Error(`HTTP request failed with status ${response.status}`);\n    }\n\n    const data = response.data;\n\n    if (data.hits.length > 0) {\n      const cardHeight = getGalleryCardHeight();\n\n      data.hits.forEach(image => {\n        const card = imageCard(image);\n        gallery.appendChild(card);\n      });\n\n      if (data.totalHits > currentPage * perPage) {\n        loadMoreBtn.style.display = 'block';\n\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth'\n        });\n      } else {\n        loadMoreBtn.style.display = 'none';\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          messageColor: '#FAFAFB',\n          backgroundColor: '#4285F4',\n          position: 'topRight'\n        });\n      }\n\n      modal.refresh();\n    } else {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#FAFAFB',\n        backgroundColor: '#EF4040',\n        position: 'topRight'\n      });\n    }\n  } catch (error) {\n    console.error(error.message);\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  try {\n    currentPage++;\n    const response = await axios.get(`https://pixabay.com/api/?key=41525979-544d9b4f8d317eee068e80d65&q=${searchTerm}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=${perPage}`);\n    \n    if (response.status !== 200) {\n      throw new Error(`HTTP request failed with status ${response.status}`);\n    }\n\n    const data = response.data;\n\n    if (data.hits.length > 0) {\n      data.hits.forEach(image => {\n        const card = imageCard(image);\n        gallery.appendChild(card);\n      });\n\n      if (data.totalHits <= currentPage * perPage) {\n        loadMoreBtn.style.display = 'none';\n      }\n\n      modal.refresh();\n    }\n  } catch (error) {\n    console.error(error.message);\n  }\n});\n\nfunction imageCard(image) {\n  const card = document.createElement('div');\n\n  card.innerHTML = `\n    <a href=\"${image.largeImageURL}\">\n    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\"></a>\n    <div class=\"info\">\n    <div class=\"image-info\">\n    <span>Likes</span>\n    <span class=\"image-value\">${image.likes}</span></div>\n    <div class=\"image-info\">\n    <span>Views</span>\n    <span class=\"image-value\">${image.views}</span></div>\n    <div class=\"image-info\">\n    <span>Comments</span>\n    <span class=\"image-value\">${image.comments}</span></div>\n    <div class=\"image-info\">\n    <span>Downloads</span>\n    <span class=\"image-value\">${image.downloads}</span></div>\n    </div>\n  `;\n\n  return card;\n}\n\nfunction getGalleryCardHeight() {\n  const card = document.createElement('div');\n  card.style.visibility = 'hidden';\n  card.style.position = 'absolute';\n  card.style.zIndex = '-1';\n\n  card.innerHTML = `\n    <a href=\"#\">\n    <img src=\"#\" alt=\"#\"></a>\n    <div class=\"info\">\n    <div class=\"image-info\">\n    <span>Likes</span>\n    <span class=\"image-value\">0</span></div>\n    <div class=\"image-info\">\n    <span>Views</span>\n    <span class=\"image-value\">0</span></div>\n    <div class=\"image-info\">\n    <span>Comments</span>\n    <span class=\"image-value\">0</span></div>\n    <div class=\"image-info\">\n    <span>Downloads</span>\n    <span class=\"image-value\">0</span></div>\n    </div>\n  `;\n\n  gallery.appendChild(card);\n  const cardHeight = card.getBoundingClientRect().height;\n  gallery.removeChild(card);\n\n  return cardHeight;\n}\n"],"names":["fetchUsersBtn","gallery","textInput","loadMoreBtn","currentPage","searchTerm","perPage","modal","SimpleLightbox","loader","event","searchParams","response","axios","data","cardHeight","getGalleryCardHeight","image","card","imageCard","iziToast","error"],"mappings":"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"}